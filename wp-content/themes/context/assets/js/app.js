window.App={loaded:!1,mob:!1,prelHid:!1,oldBrowser:!1,scrollInertia:300,loadApp:function(){App.findWidth(),App.detectOS(),App.page=$("body").attr("data-page"),this.globalEvents()},findWidth:function(){App.viewWidth=Math.max(document.documentElement.clientWidth,window.innerWidth||0)},globalEvents:function(){this.formsInit(),this.mainNav(),this.resizeDetect()},linksInit:function(){},scrollInit:function(){},scrollPageContainer:function(t){App.mob||($(".page-container").css("overflow","hidden"),$(".page-container").css("height","100vh"),this.bodyScroller=$(".page-container").mCustomScrollbar({theme:"dark",scrollInertia:App.scrollInertia,autoHideScrollbar:!0,callbacks:{whileScrolling:function(){null!=t&&t.scrollCallbackHandler.apply(t)}}}))},formsInit:function(){$(".send").on("click",function(t){var e,i,n,s;console.log("clicked"),n=$(this).parents("form"),s=!0,$(n).find(".must_fill").each(function(e){if(""===$(this).val())return $(this).addClass("attention"),s=!1,t.preventDefault(),!1}),$("input[name='name']").val(),$("input[name='phone']").val(),!0===s&&(t.preventDefault(),i=$(".contact-form form"),e={action:"contact_form",name:i.find('input[name="name"]').val(),email:i.find('input[name="email"]').val(),phone:i.find('input[name="phone"]').val(),message:i.find('textarea[name="message"]').val()},$.post(window.ajaxPath,e,function(t){console.log(t)}),$("form").addClass("off"),$(".msg-success").removeClass("dn"),setTimeout(function(){$(".msg-success").addClass("on")},200))}),$("form").on("click",'input[type="text"], textarea',function(){""===$(this).val()&&$(this).val("").addClass("filled")}),$("form").on("blur",'input[type="text"], textarea',function(){""===$(this).val()&&$(this).removeClass("filled")}),$("form").on("click",".attention",function(){$(this).removeClass("attention")})},mainNav:function(){$(".nav_btn").click(function(){$(".nav").addClass("active")}),$(".close_btn").click(function(){$(".nav").removeClass("active")}),$(".nav_ul li a").hover(function(){var t;t=$(this).parent().index(),$(".pix_ul li").removeClass("active"),$(".pix_ul li").eq(t).addClass("active")},function(){})},detectOS:function(){-1!==navigator.appVersion.indexOf("Android")&&(App.os="Android",App.mob=!0),-1!==navigator.appVersion.indexOf("iOS")&&(App.os="iOS",App.mob=!0)},checkTurn:function(){$(window).width()<640&&window.innerHeight<window.innerWidth||window.innerHeight<480?$(".turn_device").show():setTimeout(function(){$(".turn_device").fadeOut()},500)},isBelowViewport:function(t){var e;return e=200,t.getBoundingClientRect().y-document.documentElement.clientHeight+e>0},showPreloader:function(){if($(".preloader").removeClass("tl"),App.oldBrowser)return void $(".preloader").removeClass("hid")},hidePreloader:function(){if(!App.prelHid){if(App.prelHid=!0,App.oldBrowser)return void $(".preloader").addClass("hid");$(".preloader").addClass("br"),setTimeout(function(){$(".preloader").addClass("notr").addClass("tl").removeClass("br")},1400),setTimeout(function(){$(".preloader").removeClass("notr")},1500)}},lazyNavChain:function(t){null==t&&(t=$(".nav .lazy")),t.length>0&&$(t[0]).lazy({attribute:"data-src",afterLoad:function(){App.lazyNavChain(_.rest(t))}})},resizeDetect:function(){var t,e,i,n,s,o;i=0,n=!1,t=800,o=0,s=0,e=function(){App.findWidth(),new Date-i<t?setTimeout(function(){e()},t):(n=!1,s=Math.max(document.documentElement.clientWidth,window.innerWidth||0),o!==s&&(console.log(o),console.log(s)))},$(window).resize(function(){App.findWidth(),!1===n&&(n=!0,i=new Date,o=Math.max(document.documentElement.clientWidth,window.innerWidth||0),setTimeout(function(){e()},t))})}},$(document).ready(function(){console.log("document ready"),App.loadApp(),setTimeout(function(){return App.hidePreloader()},1e3)}),window.onload=function(){console.log("loaded"),App.loaded=!0,App.hidePreloader(),$(".nav").length>0&&App.lazyNavChain(),null==App.page&&(console.log("page undefined"),App.page=$("body").attr("data-page")),null!=App[App.page].init&&"function"==typeof App[App.page].init&&App[App.page].init()},App.home={init:function(){console.log("home"),this.initSlides(),this.initScrollBar(),this.initSmallSliders(),this.scrollHandler(),this.menuHandler()},initSlides:function(){this.slideSwitcher.init($(".page-slide").length,[this.slideNameSwitcher,this.slideBgSwitcher,this.slideContentSwitcher])},menuHandler:function(){var t,e,i;t=this,e=$(".nav"),i=e.find("li a"),i.on("click",function(){var n,s;s=i.index(this),s++,setTimeout(function(){t.slideSwitcher.executeAll("switchTo",s)},600),n=e.find(".close_btn"),n.trigger("click")})},scrollHandler:function(){var t,e;t=this,e=_.throttle(function(e){e>0?t.slideSwitcher.executeAll("prev"):t.slideSwitcher.executeAll("next")},1200,{trailing:!1}),$("body").on("mousewheel",function(t){e(t.deltaY)}),$("body").on("touchmove",function(i){var n,s;n=i.touches[0].clientY,s=$(window).scrollTop()+$(window).height()-$(".page-slide.active .content-wrapper").height(),n<t.lastY-50?s>=-70&&(e(-1),t.lastY=n):n>t.lastY+50&&(console.log("+"),$("html").scrollTop()<=0&&$("body").scrollTop()<=0&&(console.log("++"),e(1),t.lastY=n))}),$("body").on("touchstart",function(e){t.lastY=e.touches[0].clientY,t.htmlScroll=$("html").scrollTop(),t.bodyScroll=$("body").scrollTop()})},scrollThrottle:function(){},initSmallSliders:function(){$(".data-slider .text-blocks").owlCarousel({items:1,loop:!1,nav:!1,dots:!0,margin:20,onInitialized:function(){console.log("carousel ready")}})},initScrollBar:function(){App.viewWidth>768&&($(".nav").mCustomScrollbar({theme:"dark",scrollInertia:500}),$(".content-block.scrollable").mCustomScrollbar({theme:"dark",scrollInertia:500})),App.viewWidth<=1&&$(".page-slide").mCustomScrollbar({theme:"dark",scrollInertia:500,documentTouchScroll:!0})},slideSwitcher:{init:function(t,e){var i;i=this,this.linkedSwitchers=e,this.executeAll("init"),this.linkedSwitchers.push(this),this.switcherBlock=$(".page-slide-switcher"),this.nextBtn=this.switcherBlock.find(".page-slide-switcher_next"),this.prevBtn=this.switcherBlock.find(".page-slide-switcher_prev"),this.counter=this.switcherBlock.find(".page-slide-switcher_counter"),this.targetWidth=768,this.logo=$(".top .logo"),this.menuItems=$(".nav li"),this.count=1,this.counter.html("0"+this.count),this.maxCount=t,this.nextBtn.on("click",function(){i.switchersReady()&&i.executeAll("next")}),this.prevBtn.on("click",function(){i.switchersReady()&&i.executeAll("prev")}),this.ready=!0},executeAll:function(t,e){_.each(this.linkedSwitchers,function(i){"function"==typeof i[t]&&i[t](e)})},switchersReady:function(){var t;return t=!0,_.each(this.linkedSwitchers,function(e){e.ready||(t=!1)}),t},additionalZero:function(){return this.count>0&&this.count<10?"0":""},next:function(){return this.count<this.maxCount&&(this.count++,this.counter.html(this.additionalZero()+this.count),this.menuItems.removeClass("active"),this.menuItems.eq(this.count-1).addClass("active"),App.findWidth(),App.viewWidth<=this.targetWidth&&this.logo.addClass("hid"),this.count)},prev:function(){return this.count>1&&(this.count--,this.counter.html(this.additionalZero()+this.count),this.menuItems.removeClass("active"),this.menuItems.eq(this.count-1).addClass("active"),App.findWidth(),App.viewWidth<=this.targetWidth&&1===this.count&&this.logo.removeClass("hid"),this.count)},switchTo:function(t){return!(t<1||t>this.maxCount)&&(this.count=t,this.counter.html(this.additionalZero()+this.count),this.menuItems.removeClass("active"),this.menuItems.eq(this.count-1).addClass("active"),App.findWidth(),App.viewWidth<=this.targetWidth&&(1===this.count?this.logo.removeClass("hid"):this.logo.addClass("hid")),!0)}},slideNameSwitcher:{init:function(){this.nameBlock=$(".page-slide-name"),this.namesWrapper=this.nameBlock.find(".names"),this.names=this.namesWrapper.find(".name"),this.nameAnimationDelay=400,this.switchAnimationDelay=1e3,this.slideNumber=1,this.calcNameElemHeight(),this.ready=!0,this.switchTo(parseInt(this.namesWrapper.find(".active").attr("data-count")))},calcNameElemHeight:function(){var t;return t=this.nameBlock.find(".name").eq(0),this.nameElemHeight=t.outerHeight(!0),this.nameElemHeight},switchTo:function(t){var e,i;if(t>this.names.length||t<1)return!1;if(t!==this.slideNumber)return i=this,this.names.removeClass("active"),this.slideNumber=t,e=this.nameElemHeight*(t-1),this.ready=!1,setTimeout(function(){i.names.css("transform","translateY(-"+e+"px)"),setTimeout(function(){i.names.eq(t-1).addClass("active"),i.ready=!0},i.switchAnimationDelay)},i.nameAnimationDelay),e},next:function(){return this.switchTo(this.slideNumber+1)},prev:function(){return this.switchTo(this.slideNumber-1)}},slideBgSwitcher:{init:function(){this.bgSlideWrapper=$(".page-bgs"),this.bgSlides=this.bgSlideWrapper.find(".page-bg"),this.slideNumber=1,this.ready=!0},switchTo:function(t){if(t!==this.slideNumber){if(t<1||t>this.bgSlides.length)return!1;if(t<this.slideNumber)for(;t!==this.slideNumber;)this.prev();else for(;t!==this.slideNumber;)this.next();return this.slideNumber}},next:function(){var t;return t=this.bgSlides.eq(this.slideNumber),t.length>0&&(t.addClass("active"),this.slideNumber++,!0)},prev:function(){var t,e;return this.slideNumber>1&&(t=this.bgSlides.eq(this.slideNumber-1),e=this.bgSlides.eq(this.slideNumber-2),t.removeClass("active"),e.addClass("active"),this.slideNumber--,!0)}},slideContentSwitcher:{init:function(){this.contentSlideWrapper=$(".page-slides"),this.contentSlides=this.contentSlideWrapper.find(".page-slide"),this.switchTimeout=700,this.slideNumber=1,this.ready=!0},switchTo:function(t){var e,i,n;if(i=this,t!==this.slideNumber)return!(t<1)&&(e=this.contentSlides.eq(this.slideNumber-1),n=this.contentSlides.eq(t-1),n.length>0&&(this.ready=!1,this.slideNumber=t,e.addClass("off"),n.addClass("active"),setTimeout(function(){$("html").scrollTop(0),$("body").scrollTop(0),e.removeClass("active"),n.removeClass("off"),i.ready=!0},this.switchTimeout),!0))},next:function(){var t,e,i;return i=this,t=this.contentSlides.eq(this.slideNumber-1),e=this.contentSlides.eq(this.slideNumber),e.length>0&&(this.ready=!1,this.slideNumber++,t.addClass("off"),e.addClass("active"),setTimeout(function(){$("html").scrollTop(0),$("body").scrollTop(0),t.removeClass("active"),e.removeClass("off"),i.ready=!0},this.switchTimeout),!0)},prev:function(){var t,e,i;return i=this,t=this.contentSlides.eq(this.slideNumber-1),e=this.contentSlides.eq(this.slideNumber-2),this.slideNumber>1&&(this.ready=!1,this.slideNumber--,t.addClass("off"),e.addClass("active"),setTimeout(function(){$("html").scrollTop(0),$("body").scrollTop(0),t.removeClass("active"),e.removeClass("off"),i.ready=!0},this.switchTimeout),!0)}}};
//# sourceMappingURL=maps/app.js.map
